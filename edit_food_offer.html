<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="icon" href="https://firebasestorage.googleapis.com/v0/b/star-delivery-38f25.appspot.com/o/logo%2F20210620_101844.jpg?alt=media&token=18c05ec0-c3c3-477e-baa3-535cc1b0cbdb" type="image/jpg"/>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="https://firebasestorage.googleapis.com/v0/b/star-delivery-38f25.appspot.com/o/logo%2F20210620_101844.jpg?alt=media&token=18c05ec0-c3c3-477e-baa3-535cc1b0cbdb" type="image/jpg"/>
    <title>Edit food offer - Offer walls </title>

    <!-- Custom fonts for this template-->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/av-admin.min.css" rel="stylesheet">
<style>
    .modal-confirm {    
  color: #636363;
  width: 325px;
  font-size: 14px;
}
.modal-confirm .modal-content {
  padding: 20px;
  border-radius: 5px;
  border: none;
}
.modal-confirm .modal-header {
  border-bottom: none;   
  position: relative;
}
.modal-confirm h4 {
  text-align: center;
  font-size: 26px;
  margin: 30px 0 -15px;
}
.modal-confirm .form-control, .modal-confirm .btn {
  min-height: 40px;
  border-radius: 3px; 
}
.modal-confirm .close {
  position: absolute;
  top: -5px;
  right: -5px;
} 
.modal-confirm .modal-footer {
  border: none;
  text-align: center;
  border-radius: 5px;
  font-size: 13px;
} 
.modal-confirm .icon-box {
  color: #fff;    
  position: absolute;
  margin: 0 auto;
  left: 0;
  right: 0;
  top: -70px;
  width: 95px;
  height: 95px;
  border-radius: 50%;
  z-index: 9;
  background: #82ce34;
  padding: 15px;
  text-align: center;
  box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);
}
.modal-confirm .icon-box i {
  font-size: 58px;
  position: relative;
  top: 3px;
}
.modal-confirm.modal-dialog {
  margin-top: 80px;
}
.modal-confirm .btn {
  color: #fff;
  border-radius: 4px;
  background: #82ce34;
  text-decoration: none;
  transition: all 0.4s;
  line-height: normal;
  border: none;
}
.modal-confirm .btn:hover, .modal-confirm .btn:focus {
  background: #6fb32b;
  outline: none;
}
.trigger-btn {
  display: inline-block;
  margin: 100px auto;
}
</style>

</head>

<body class="bg-gradient-primary">

    <div class="container" >

        <!-- Outer Row -->
        <div class="row justify-content-center">

            <div class="col-xl-10 col-lg-12 col-md-9">

                <div class="card o-hidden border-0 shadow-lg my-5">
                    <div class="card-body p-0">
                        <!-- Nested Row within Card Body -->
                        <div class="row">
                            <div class="col-lg-6 d-none d-lg-block bg-login-image1"></div>
                            <div class="col-lg-6">
                                <div class="p-5">
                                    <div class="text-center">
                                        <h1 class="h4 text-gray-900 mb-4">EDIT FOOD OFFER </h1>
                                    </div>
                                    <form class="user"onsubmit="return false">
 
                                        <div class="form-group">
                                          <h5>Offer Name</h5>
                                            <input type="text" class="form-control form-control-user"
                                                id="d" placeholder="Offer Name" required="required">
                                        </div>
                                        <div class="form-group">
                                          <h5>Restaurant Name</h5>
                                            <input type="text" class="form-control form-control-user"
                                                id="r" placeholder="Restaurant Name" required="required" readonly="readonly">
                                        </div>
                                        <div class="form-group">
                                          <h5>Food Name</h5>
                                          <input type="text" class="form-control form-control-user"
                                              id="e" placeholder="Food Name" required="required" readonly="readonly">
                                      </div>
                                      <div class="form-group">
                                        <h5>Food Cuisine</h5>
                                          <input type="text" class="form-control form-control-user"
                                              id="cui" placeholder="Cuisine" required="required" readonly="readonly">
                                      </div>
                                      <div class="form-group">
                                        <h5>Food Category</h5>
                                          <input type="text" class="form-control form-control-user"
                                              id="ctg" placeholder="Category" required="required" readonly="readonly">
                                      </div>
                                      <div class="form-group">
                                        <h5>Actual Price</h5>
                                        <input type="text" class="form-control form-control-user"
                                            id="x" placeholder="Actual price" required="required"readonly="readonly">
                                    </div>
                                        <div class="form-group">
                                          <h5>Offer Price</h5>
                                            <input type="text" class="form-control form-control-user"
                                                id="f" placeholder="Offer price" required="required">
                                        </div>
                                        
                                        <div class="form-group">
                                          <h5>Offer validity date</h5>
                                          <input type="date" class="form-control form-control-user"
                                              id="dt" required="required">
                                      </div>
                                      <div class="form-group">
                                        <h5>Offer validity time</h5>
                                        <input type="time" class="form-control form-control-user"
                                            id="time" required="required">
                                    </div>

                                       <button id ='p1' class="btn btn-primary btn-user btn-block" onclick='validate()'>Add Coupon</button>
                                       <p style="visibility: hidden;" id='p2'>  <a href="#myModal"  data-toggle="modal"> <button class="btn btn-primary btn-user btn-block" onclick='save1()' id='btn1'>
                                        Register
                                     </button></a></p>
                                        <hr>
                                       
                                    </form>
                                    <hr>
                                    <div class="text-center">
                                        <a href="add_menu(with_image_adding)starappdevlivery (1).html" class="btn btn-primary btn-user btn-block">
                                            Go back
                                         </a>
                                         <hr>

                                    </div>
                                   
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>
<div class="text-center">
  <!-- Button HTML (to Trigger Modal) -->
  
</div>

<!-- Modal HTML -->
<div id="myModal" class="modal fade">
  <div class="modal-dialog modal-confirm">
    <div class="modal-content">
      <div class="modal-header">
        <div class="icon-box">
          <i class="material-icons">&#xE876;</i>
        </div>        
        <h4 class="modal-title w-100">Awesome!</h4> 
      </div>
      <div class="modal-body">
        <p class="text-center">Coupon details  has been successfully added.</p>
      </div>
      <div class="modal-footer">
              <a class="btn btn-success btn-block" href='cards.html'>OK</a>
      </div>
    </div>
  </div>
</div> 

    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/av-admin.min.js"></script>
    
     <script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-database.js"></script>
  <script type="text/javascript">
  
  // Your web app's Firebase configuration
// Initialize Firebase
/*
function getcoordinates(){
var address =  document.getElementById('f').value;
var theurl = "https://geocoder.ls.hereapi.com/6.2/geocode.json?apiKey=3_h1uPumgaSn62Onibdsb4RO1jXB5udqPA9AjGBULWM&searchtext="+address;
var xmlHttp =  new XMLHttpRequest();
xmlHttp.open('GET',theurl,false);
xmlHttp.send(null);
var json = JSON.parse(xmlHttp.responseText);
console.log(json);
document.getElementById('a').value=json.Response.View[0].Result[0].Location.DisplayPosition.Latitude;
document.getElementById('b').value=json.Response.View[0].Result[0].Location.DisplayPosition.Longitude;

}
*/
var firebaseConfig = {
  //here i have use develope project
  
  apiKey: "AIzaSyBGQsw6dLVCQ_utGY7SHLBfg7EckVz9W0o",
    authDomain: "star-delivery-38f25.firebaseapp.com",
    databaseURL: "https://star-delivery-38f25-default-rtdb.firebaseio.com",
    projectId: "star-delivery-38f25",
    storageBucket: "star-delivery-38f25.appspot.com",
    messagingSenderId: "351160619379",
    appId: "1:351160619379:web:9de85e6098b55a5ace7506"
  };
  firebase.initializeApp(firebaseConfig);

// Set database variable
var database = firebase.database()
function validate(){
	var oname = document.getElementById('d').value
  var ap = document.getElementById('x').value
  var op = document.getElementById('f').value
//var selectaccess = document.querySelector('input[name="accessto"]:checked');
if(oname=='' || ap=='' || op=='' ){
	alert('please enter all details');
	document.getElementById("error").innerHTML= "*You have not selected*";
}
else{
	document.getElementById('p1').style.visibility='hidden';
	document.getElementById('p2').style.visibility='visible';

}

}

function save1(){
  var Couponname = document.getElementById('d').value;
  //var urltosave=sessionStorage.getItem('offerurl');
  //var result=urltosave.split('/');
  var Restname=document.getElementById('r').value;;
  var foodnamee=document.getElementById('e').value;;
  var rate = document.getElementById('f').value;
  var type = sessionStorage.getItem('typeval');
 // var selectaccess = document.querySelector('input[name="accessto"]:checked');
  //var accessto=selectaccess.value;
  var date=document.getElementById('dt').value;
  var time=document.getElementById('time').value;
  //var imgurltosave=sessionStorage.getItem("foodimgurl");
  var realrate= document.getElementById('x').value;
  var cusine=document.getElementById('cui').value;
 // var type=document.getElementById('').value;
  var catg=document.getElementById('ctg').value;

   database.ref("RestaurantOffers/"+type+'/'+foodnamee+'/').update({
                      foodname:foodnamee,
                      offerprice:rate,
                      actualprice:realrate,
                      category:catg,
                      cuisine:cusine,
                      restaurant:Restname,
                      couponname:Couponname,
                      date:date,
                      time:time
                      //foodimg: imgurltosave


          })
  }


function loadvalue(){
  var d=sessionStorage.getItem('offervalues');
  var s=d.split(',');
  //alert(s);
  var zoo=s[3];
  document.getElementById('d').value=s[0];
  document.getElementById('r').value=s[1];
 document.getElementById('e').value=s[2];
 sessionStorage.setItem('typeval',zoo)
 //document.getElementById('e').value=s[3];
 document.getElementById('x').value=s[4];
 document.getElementById("f").value=s[5];
 document.getElementById('cui').value=s[6];
 document.getElementById('ctg').value=s[7];
 document.getElementById('dt').value=s[8];
 document.getElementById('time').value=s[9];

}
window.addEventListener('load',loadvalue);

    </script>
 

</body>

</html>